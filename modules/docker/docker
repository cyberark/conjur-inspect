# Docker module
#
# The Docker modules provides check for the docker CLI version
# and image presence.

source "${BASH_SOURCE%/*}/../../utils/logManager"

docker_exists() {
  docker version
}

docker_image_exists() {
  image_name=$1

  if [[ "$image_name" == "" ]]; then
    logThis "Cannot verify image exists. Image name missing." "ERROR"
    return
  fi

  image_hash=$(docker images -q ${image_name} 2> /dev/null)

  if [[ "$image_hash" != "" ]]; then
    logThis "${image_name} exists with hash ${image_hash}." "SUCCESS"
  else
    logThis "${image_name} does not exist. Use ${CYAN}docker pull ${image_name} ${NORMAL} or ${CYAN}docker load -i [tar_path] ${NORMAL} to create it." "ERROR"
  fi
}